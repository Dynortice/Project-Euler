---
title: "Problem 2"
author: "Dynortice"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    theme: readable
---

## Even Fibonacci numbers
##### Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with $1$ and $2$, the first $10$ terms will be:
$$1,2,3,5,8,13,21,34,55,89,...$$

##### By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.
## Solution
##### Instead using brute force just considering at Binet's formula for nth Fibonacci number:
$$F_n=\frac{\phi^n-\psi^n}{\phi-\psi}=\frac{\phi^n-\psi^n}{\sqrt{5}}$$

##### where
$$\phi=\frac{1+\sqrt{5}}{2}$$
$$\psi=1-\phi=-\frac{1}{\phi}=\frac{1-\sqrt{5}}{2}$$

##### Also we can use formula of sum of $n$ first Fibonacci numbers:
$$\sum_{i=1}^nF_i=F_{n+2}-1$$

##### Last thing we must to do it's to find the index of last term in sequence below $4$ millions.
$$n(F)=\lfloor{log_{\phi}(\sqrt{5}F+\frac{1}{2})\rfloor}$$

```{r}
library(microbenchmark)
source("../euler/R/calculus.R")
```

```{r}
compute <- function(n) {
    return(as.integer(fibonacci_number(fibonacci_index(n) + 2) / 2))
}
```

```{r}
compute(4000000)
```

```{r}
microbenchmark(compute(4000000))
```
